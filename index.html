<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AP US History SAQ Practice</title>
    <script src="https://cdn.jsdelivr.net/npm/react@17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .unit-select, .answer-area {
            margin-bottom: 20px;
        }
        textarea {
            width: 100%;
            height: 200px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const units = [
            "Period 1: 1491-1607",
            "Period 2: 1607-1754",
            "Period 3: 1754-1800",
            "Period 4: 1800-1848",
            "Period 5: 1844-1877",
            "Period 6: 1865-1898",
            "Period 7: 1890-1945",
            "Period 8: 1945-1980",
            "Period 9: 1980-Present"
        ];

        const saqPrompts = {
            "Period 1: 1491-1607": [
                "Explain the impact of European colonization on Native American societies.",
                "Compare the initial motivations of Spanish and English explorers in the Americas."
            ],
            "Period 2: 1607-1754": [
                "Analyze the development of slavery in the colonial period.",
                "Describe the economic and social differences between New England and Southern colonies."
            ]
            // More prompts for other periods would be added here
        };

        function APUSHistoryApp() {
            const [selectedUnit, setSelectedUnit] = React.useState('');
            const [prompt, setPrompt] = React.useState('');
            const [userAnswer, setUserAnswer] = React.useState('');
            const [grade, setGrade] = React.useState(null);

            const generatePrompt = (unit) => {
                const prompts = saqPrompts[unit] || [];
                return prompts[Math.floor(Math.random() * prompts.length)] || 
                    "No prompts available for this unit. Please select another.";
            };

            const handleUnitSelect = (e) => {
                const unit = e.target.value;
                setSelectedUnit(unit);
                setPrompt(generatePrompt(unit));
                setUserAnswer('');
                setGrade(null);
            };

            const gradeAnswer = async () => {
                // Simulated AI grading (would be replaced with actual AI API call)
                const gradeResponse = await fetch('http://127.0.0.1:5000', {
                    method: 'POST',
                    body: JSON.stringify({ 
                        prompt: prompt, 
                        answer: userAnswer 
                    })
                });
                const result = await gradeResponse.json();
                setGrade(result.grade);
            };

            return (
                <div>
                    <h1>AP US History SAQ Practice</h1>
                    
                    <div className="unit-select">
                        <label>Select Unit: </label>
                        <select 
                            value={selectedUnit} 
                            onChange={handleUnitSelect}
                        >
                            <option value="">Choose a Unit</option>
                            {units.map(unit => (
                                <option key={unit} value={unit}>{unit}</option>
                            ))}
                        </select>
                    </div>

                    {selectedUnit && (
                        <div>
                            <h2>SAQ Prompt</h2>
                            <p>{prompt}</p>
                            <div className="instructions">
                                <strong>Remember to ACE your answer:</strong>
                                <ul>
                                    <li>A - Answer the prompt directly</li>
                                    <li>C - Clarify your points</li>
                                    <li>E - Explain with specific historical evidence</li>
                                </ul>
                            </div>
                            <div className="answer-area">
                                <textarea
                                    placeholder="Write your Short Answer Question response here..."
                                    value={userAnswer}
                                    onChange={(e) => setUserAnswer(e.target.value)}
                                ></textarea>
                            </div>
                            <button onClick={gradeAnswer}>
                                Submit & Grade Answer
                            </button>

                            {grade !== null && (
                                <div>
                                    <h3>Grade: {grade}/4</h3>
                                    {grade === 4 && <p>Excellent response!</p>}
                                    {grade === 3 && <p>Good response, could use more specific details.</p>}
                                    {grade === 2 && <p>Needs more development and historical context.</p>}
                                    {grade === 1 && <p>Significantly lacks historical understanding.</p>}
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<APUSHistoryApp />, document.getElementById('root'));
    </script>
</body>
</html>
